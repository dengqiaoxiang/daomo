{"version":3,"sources":["uni-app:///main.js","webpack:///F:/daomo/pages/money/pay.vue?fd37","webpack:///F:/daomo/pages/money/pay.vue?b379","webpack:///F:/daomo/pages/money/pay.vue?5468","webpack:///F:/daomo/pages/money/pay.vue?d6fd","uni-app:///pages/money/pay.vue","webpack:///F:/daomo/pages/money/pay.vue?9d04","webpack:///F:/daomo/pages/money/pay.vue?3635"],"names":["createPage","Page"],"mappings":"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","file":"pages/money/pay.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/money/pay.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay.vue?vue&type=template&id=5f7de3a0&\"\nvar renderjs\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/money/pay.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=template&id=5f7de3a0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = parseInt(_vm.orderInfo.left_time)\n  var g0 = _vm.payTypeArr.indexOf(\"wechat\")\n  var g1 = _vm.payTypeArr.indexOf(\"alipay\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        g0: g0,\n        g1: g1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"app\">\r\n\t\t<view class=\"price-box\">\r\n\t\t\t<text>支付金额</text>\r\n\t\t\t<text class=\"price\">{{orderInfo.order_price}}</text>\r\n\t\t</view>\r\n\t\t<view class=\"count-down-box\" v-if=\"orderInfo.left_time > 0\">\r\n\t\t\t<text>请在 </text>\r\n\t\t\t<view class=\"time\">\r\n\t\t\t\t<count-down @callback=\"reGetData\" :targetTime=\"parseInt(orderInfo.left_time)\"></count-down>\r\n\t\t\t</view>\r\n\t\t\t<text> 内完成支付</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"pay-type-list\">\r\n\t\t\t<view class=\"type-item b-b\" @click=\"changePayType('wechat')\" v-if=\"payTypeArr.indexOf('wechat') > -1\">\r\n\t\t\t\t<text class=\"icon iconfont icon19weixinzhifu\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">微信支付</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" color=\"#fa436a\" :checked='payType == \"wechat\" || payTypeArr.length == 1' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"type-item b-b\" @click=\"changePayType('alipay')\" v-if=\"payTypeArr.indexOf('alipay') > -1\">\r\n\t\t\t\t<text class=\"icon iconfont iconalipay\"></text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"tit\">支付宝支付</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<label class=\"radio\">\r\n\t\t\t\t\t<radio value=\"\" color=\"#fa436a\" :checked='payType == \"alipay\" || payTypeArr.length == 1' />\r\n\t\t\t\t\t</radio>\r\n\t\t\t\t</label>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<text class=\"mix-btn\" @click=\"confirm\">确认支付</text>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport CountDown from '@/components/min-countdown'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tCountDown\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpayType: \"wechat\",\r\n\t\t\t\torderInfo: {},\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\topenId: null,\r\n\t\t\t\t// #endif\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tpayTypeArr() {\r\n\t\t\t\tlet res = [];\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t// res = ['wechat', 'alipay'];\r\n\t\t\t\tif (this.$wxApi.isweixin()) {\r\n\t\t\t\t\tres = ['wechat']\r\n\t\t\t\t} else res = ['alipay']\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tres = ['wechat']\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tres = ['wechat', 'alipay'];\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-ALIPAY | MP-TOUTIAO\r\n\t\t\t\tres = ['alipay']\r\n\t\t\t\t// #endif\r\n\t\t\t\treturn res\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onReady() {\r\n\t\t\t// #ifdef H5\r\n\t\t\tlet payload = this.$route.query.payload\r\n\t\t\tlet openId = uni.getStorageSync('openId')\r\n\t\t\tif (!openId && payload) {\r\n\t\t\t\tpayload = JSON.parse(payload)\r\n\t\t\t\tif (payload.state = 1 && !openId) {\r\n\t\t\t\t\tlet res = await this.$http.post('index.openid', {code: payload.code})\r\n\t\t\t\t\tuni.setStorageSync('openId', res.data)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.$wxApi.isweixin() && !uni.getStorageSync('openId')) {\r\n\t\t\t\tif (!uni.getStorageSync('appId')) {\r\n\t\t\t\t\tlet res = await this.$http.post('index.config', {code: ['h5_appId']});\r\n\t\t\t\t\tuni.setStorageSync('appId', res.data.xshop_h5_appid)\r\n\t\t\t\t}\r\n\t\t\t\tlet redirect_uri = encodeURIComponent(this.$wxApi.redirectUrl(location.href))\r\n\t\t\t\tlet appId = uni.getStorageSync('appId')\r\n\t\t\t\tlocation.href = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appId}&redirect_uri=${redirect_uri}&response_type=code&scope=snsapi_base&state=1#wechat_redirect`\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log('ddddd',options);\r\n\t\t\treturn;\r\n\t\t\tthis.order_sn = options.order_sn\r\n\t\t\tthis.getData()\r\n\t\t\t\r\n\t\t\tthis.$on('onPaySuccess', (e, res) => {\r\n\t\t\t\tthis.paySuccess()\r\n\t\t\t})\r\n\t\t\tthis.$on('onPayFail', (e, res) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: e,\r\n\t\t\t\t\t'icon': 'none'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tgetData() {\r\n\t\t\t\tthis.$http.get('order.info', {\r\n\t\t\t\t\torder_sn: this.order_sn,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.orderInfo = res.data\r\n\t\t\t\t\tthis.checkOrder()\r\n\t\t\t\t}).catch(e => {})\r\n\t\t\t},\r\n\t\t\t//选择支付方式\r\n\t\t\tchangePayType(type) {\r\n\t\t\t\tthis.payType = type;\r\n\t\t\t},\r\n\t\t\tconfirm() {\r\n\t\t\t\tif (this.payTypeArr.length == 1) this.payType = this.payTypeArr[0]\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (this.$wxApi.isweixin()) {\r\n\t\t\t\t\tthis.confirmH5WEIXIN()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.confirmH5Alipay()\r\n\t\t\t\t\tthis.confirmH5WEIXIN()\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthis.confirmMPWEIXIN()\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tthis.confirmApp()\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\tthis.confirmMPALIPAY()\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\t\tthis.confirmMPTOUTIAO()\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// #ifdef H5\r\n\t\t\t//确认支付\r\n\t\t\tconfirmH5WEIXIN() {\r\n\t\t\t\tlet pay_method = this.$wxApi.isweixin() ? 'mp' : 'wap'\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\torder_sn: this.order_sn, \r\n\t\t\t\t\tpay_type: this.payType, \r\n\t\t\t\t\tpay_method,\r\n\t\t\t\t\tappId: uni.getStorageSync('appId'),\r\n\t\t\t\t\topenId: uni.getStorageSync('openId')\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tthis.$http.post('pay', form).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\tlet wxpay = typeof res.data == 'string' ? JSON.parse(res.data) : res.data\r\n\t\t\t\t\t\tif (typeof WeixinJSBridge == \"undefined\") {\r\n\t\t\t\t\t\t\tif (document.addEventListener) {\r\n\t\t\t\t\t\t\t\tdocument.addEventListener('WeixinJSBridgeReady', this.onBridgeReady(wxpay), false);\r\n\t\t\t\t\t\t\t} else if (document.attachEvent) {\r\n\t\t\t\t\t\t\t\tdocument.attachEvent('WeixinJSBridgeReady', this.onBridgeReady(wxpay));\r\n\t\t\t\t\t\t\t\tdocument.attachEvent('onWeixinJSBridgeReady', this.onBridgeReady(wxpay));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn this.onBridgeReady(wxpay);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}).catch(e => {uni.hideLoading() })\r\n\t\t\t},\r\n\t\t\tonBridgeReady(wxpay) {\r\n\t\t\t\tWeixinJSBridge.invoke('getBrandWCPayRequest', {\r\n\t\t\t\t\tappId: wxpay.appId,\r\n\t\t\t\t\ttimeStamp: wxpay.timeStamp,\r\n\t\t\t\t\tnonceStr: wxpay.nonceStr,\r\n\t\t\t\t\tpackage: wxpay.package,\r\n\t\t\t\t\tsignType: wxpay.signType,\r\n\t\t\t\t\tpaySign: wxpay.paySign\r\n\t\t\t\t}, res => {\r\n\t\t\t\t\tif (res.err_msg == \"get_brand_wcpay_request:ok\") { //支付成功\r\n\t\t\t\t\t\tthis.$emit('onPaySuccess')\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else { //支付失败\r\n\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tconfirmH5Alipay() {\r\n\t\t\t\tlet pay_method = 'wap'\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\torder_sn: this.order_sn, \r\n\t\t\t\t\tpay_type: this.payType, \r\n\t\t\t\t\tpay_method\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tthis.$http.post('pay', form).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.setAttribute('id', 'alipaysubmit-box')\r\n\t\t\t\t\tel.innerHTML = res.data;\r\n\t\t\t\t\tdocument.body.appendChild(el); \r\n\t\t\t\t\tlet form = document.forms['alipaysubmit']\r\n\t\t\t\t\tlet data = this.$tools.serializeForm('alipaysubmit')\r\n\t\t\t\t\tlet url = form.action\r\n\t\t\t\t\tdocument.body.removeChild(el)\r\n\t\t\t\t\twindow.location.href = url + '&' + data\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tconfirmMPWEIXIN() {\r\n\t\t\t\tlet pay_method = 'miniapp'\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\torder_sn: this.order_sn, \r\n\t\t\t\t\tpay_type: this.payType, \r\n\t\t\t\t\tpay_method,\r\n\t\t\t\t\tappId: uni.getStorageSync('appId'),\r\n\t\t\t\t\topenId: uni.getStorageSync('openId')\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tthis.$http.post('pay', form).then(res => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\tlet wxpay = typeof res.data == 'string' ? JSON.parse(res.data) : res.data\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\ttimeStamp: wxpay.timeStamp,\r\n\t\t\t\t\t\t\tnonceStr: wxpay.nonceStr,\r\n\t\t\t\t\t\t\tpackage: wxpay.package,\r\n\t\t\t\t\t\t\tsignType: wxpay.signType,\r\n\t\t\t\t\t\t\tpaySign: wxpay.paySign,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tthis.$emit('onPaySuccess')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$emit('onPayFail')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: () => {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tconfirmApp() {\r\n\t\t\t\tlet pay_method = 'app'\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\torder_sn: this.order_sn, \r\n\t\t\t\t\tpay_type: this.payType, \r\n\t\t\t\t\tpay_method,\r\n\t\t\t\t\tappId: uni.getStorageSync('appId'),\r\n\t\t\t\t\topenId: uni.getStorageSync('openId')\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tthis.$http.post('pay', form).then(resData => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (resData.data) {\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\tprovider: this.payType == 'wechat' ? 'wxpay' : this.payType,\r\n\t\t\t\t\t\t\torderInfo: resData.data,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tif (res.errMsg == 'requestPayment:ok') {\r\n\t\t\t\t\t\t\t\t\tthis.$emit('onPaySuccess')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\t\talert(JSON.stringify(res))\r\n\t\t\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).cathc(e => { uni.hideLoading() })\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\tconfirmMPALIPAY() {\r\n\t\t\t\tlet pay_method = 'mp'\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\torder_sn: this.order_sn, \r\n\t\t\t\t\tpay_type: this.payType, \r\n\t\t\t\t\tpay_method,\r\n\t\t\t\t\tappId: uni.getStorageSync('appId'),\r\n\t\t\t\t\topenId: uni.getStorageSync('openId')\r\n\t\t\t\t}\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tthis.$http.post('pay', form).then(resData => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (resData.data) {\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\tprovider: this.payType,\r\n\t\t\t\t\t\t\torderInfo: resData.data,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tif (res.resultCode == 9000) {\r\n\t\t\t\t\t\t\t\t\tthis.$emit('onPaySuccess')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => { uni.hideLoading() })\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\tconfirmMPTOUTIAO() {\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: loginRes => {\r\n\t\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\t\tthis.$http.post('index.ttmp.login', {code: loginRes.code}).then(res => {\r\n\t\t\t\t\t\t\tlet openId = res.data\r\n\t\t\t\t\t\t\tlet form = {\r\n\t\t\t\t\t\t\t\topenId,\r\n\t\t\t\t\t\t\t\torder_sn: this.order_sn,\r\n\t\t\t\t\t\t\t\tpay_type: this.payType,\r\n\t\t\t\t\t\t\t\tpay_method: 'tt'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.$http.post('pay', form).then(res => {\r\n\t\t\t\t\t\t\t\tlet postData = typeof res.data == 'string' ? JSON.parse(res.data) : res.data\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\ttt.requestPayment({\r\n\t\t\t\t\t\t\t\t\tdata: postData,\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$emit('onPaySuccess')\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t\t\t\tlet data = typeof err.data == 'string' ? JSON.stringify(err.data) : err.data\r\n\t\t\t\t\t\t\t\t\t\tlet msg = typeof data.response == 'string' ? data.response : JSON.stringify(data.response)\r\n\t\t\t\t\t\t\t\t\t\tthis.$emit('onPayFail', '支付失败')\r\n\t\t\t\t\t\t\t\t\t\t/* uni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'log',\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: msg,\r\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\t\t\t\t\t\t\tcancelText: 'cancel',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: e => {}\r\n\t\t\t\t\t\t\t\t\t\t}) */\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tpaySuccess() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/money/paySuccess'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavTo(title = '', url = '/pages/order/order?state=0') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.hideToast()\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 500)\r\n\t\t\t},\r\n\t\t\tcheckOrder() {\r\n\t\t\t\tif (this.orderInfo.status == -1) {\r\n\t\t\t\t\tthis.navTo('订单已失效')\r\n\t\t\t\t} else if (this.orderInfo.is_pay == 1) {\r\n\t\t\t\t\tthis.navTo(\"订单已支付\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treGetData() {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getData()\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t.app {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.price-box {\r\n\t\tbackground-color: #fff;\r\n\t\theight: 265upx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28upx;\r\n\t\tcolor: #909399;\r\n\r\n\t\t.price {\r\n\t\t\tfont-size: 50upx;\r\n\t\t\tcolor: #303133;\r\n\t\t\tmargin-top: 12upx;\r\n\r\n\t\t\t&:before {\r\n\t\t\t\tcontent: '￥';\r\n\t\t\t\tfont-size: 40upx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.pay-type-list {\r\n\t\tmargin-top: 20upx;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding-left: 60upx;\r\n\r\n\t\t.type-item {\r\n\t\t\theight: 120upx;\r\n\t\t\tpadding: 20upx 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-right: 60upx;\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\t.icon {\r\n\t\t\twidth: 100upx;\r\n\t\t\tfont-size: 52upx;\r\n\t\t}\r\n\r\n\t\t.icon-erjiye-yucunkuan {\r\n\t\t\tcolor: #fe8e2e;\r\n\t\t}\r\n\r\n\t\t.icon19weixinzhifu {\r\n\t\t\tcolor: #36cb59;\r\n\t\t}\r\n\r\n\t\t.iconalipay {\r\n\t\t\tcolor: #01aaef;\r\n\t\t}\r\n\r\n\t\t.tit {\r\n\t\t\tfont-size: $font-lg;\r\n\t\t\tcolor: $font-color-dark;\r\n\t\t\tmargin-bottom: 4upx;\r\n\t\t}\r\n\r\n\t\t.con {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tfont-size: $font-sm;\r\n\t\t\tcolor: $font-color-light;\r\n\t\t}\r\n\t}\r\n\r\n\t.mix-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 630upx;\r\n\t\theight: 80upx;\r\n\t\tmargin: 80upx auto 30upx;\r\n\t\tfont-size: $font-lg;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: $base-color;\r\n\t\tborder-radius: 10upx;\r\n\t\tbox-shadow: 1px 2px 5px rgba(219, 63, 96, 0.4);\r\n\t}\r\n\t\r\n\t.count-down-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 20upx 0;\r\n\t\tfont-size: $font-base;\r\n\t\t.time {\r\n\t\t\tcolor: $base-color;\r\n\t\t}\r\n\t\t\n\t}\r\n</style>\n","import mod from \"-!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\SRWZC\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pay.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1616817968055\n      var cssReload = require(\"C:/Users/SRWZC/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}